"use strict";document.addEventListener("DOMContentLoaded",()=>{window.addEventListener("scroll",apps.layouts.toggleScrollButton)});const apps={options:{sound:!0},func:{resetClassName(e,...t){e.className="",e.classList.add(...t)}},layouts:{loadingMask:function(e,t=null){let s=document.querySelector(".loading-mask");switch(e){case"delay":t=t??2e3,t+=1e3,s.style.display="flex",setTimeout(function(){s.style.display="none"},t);break;case"play":case"start":case"go":s.style.display="flex";break;case"stop":case"end":case"finish":s.style.display="none"}},toggleScrollButton(){let e=document.getElementById("btnGotoTop");e&&(document.body.scrollTop>50||document.documentElement.scrollTop>50?e.style.display="block":e.style.display="none")},scrollToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0},sound:{play:function(e){if(apps.options.sound)switch(e){case"success":this.setSound("success");break;case"danger":case"error":this.setSound("error");break;case"info":case"bell":this.setSound("bell");break;case"warning":this.setSound("warning")}},setSound:function(e="error"){if(apps.options.sound){let t="/assets/plugins/apps/sound",s=document.createElement("audio");navigator.userAgent.match("Firefox/")?s.setAttribute("src",t+"/"+e+".ogg"):s.setAttribute("src",t+"/"+e+".mp3"),s.play().catch(function(e){console.warn("사운드 재생 실패:",e)})}}},showModalTemplate:function(e={},t=".modal-alert"){let s={};s.type=e.type??"error",s.color=e.color??!1,s.size=e.size??"",s.icon=e.icon??!0,s.title=e.title??"",s.content=e.content??"",s.footer=e.footer??`<button type="button" class="btn" data-bs-dismiss="modal">닫기</button>`;let a=document.getElementById("template"),l=a.content.querySelector(t),o=document.importNode(l,!0),n=new bootstrap.Modal(o),d=o.querySelector(".modal-dialog"),i=o.querySelector(".modal-status"),r=o.querySelector(".modal-title"),c=o.querySelector(".modal-body-icon"),$=o.querySelector(".modal-body-content"),p=o.querySelector(".modal-footer");c.innerHTML="",apps.func.resetClassName(i,"modal-status");let u="text-primary";if(s.color)i.classList.add(`bg-${s.color}`),u=`text-${s.color}`;else switch(s.type){case"warning":case"success":case"info":i.classList.add(`bg-${s.type}`),u=`text-${s.type}`;break;default:i.classList.add("bg-danger"),u="text-danger"}switch(s.type){case"success":s.icon&&(c.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" class="icon mb-3 ${u} icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l2 2l4 -4" /></svg>`);break;case"warning":s.icon&&(c.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" class="icon mb-3 ${u} icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /> <path d="M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"/><path d="M12 9v4" /><path d="M12 17h.01" /></svg>`);break;case"error":s.icon&&(c.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" class="icon  mb-3 ${u} icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm.01 13l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -8a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z" stroke-width="0" fill="currentColor"></path></svg>`)}switch(this.sound.play(s.type),apps.func.resetClassName(d,"modal-dialog","modal-dialog-scrollable","modal-dialog-centered"),s.size){case"sm":d.classList.add("modal-sm");break;case"lg":d.classList.add("modal-lg");break;case"xl":d.classList.add("modal-xl");break;case"full":d.classList.add("modal-full-width")}r.innerHTML=s.title,$.innerHTML=s.content,p.innerHTML=s.footer;let y=document.getElementById("template-area");y.appendChild(o),n.show(),e.event&&o.addEventListener("hidden.bs.modal",function(){switch(e.event.type){case"focus":document.querySelector(e.event.selector).focus();break;case"replace":window.location.replace(e.event.url);break;case"reload":window.location.reload();break;case"back":window.history.back()}})},showToastTemplate:function(e={},t=".toast-alert",s="toast-alert-area"){let a={};a.type=e.type??"error",a.bgClass=e.bgClass??!1,a.delay=e.delay??2e3,a.autohide=e.autohide??!0,a.title=e.title??"",a.content=e.content??"";let l=document.getElementById("template"),o=l.content.querySelector(t),n=document.importNode(o,!0),d=new bootstrap.Toast(n,{autohide:a.autohide,delay:a.delay,animation:!0}),i=n.querySelector(".toast-header"),r=n.querySelector(".toast-title"),c=n.querySelector(".toast-body");apps.func.resetClassName(i,"toast-header","text-white");let $=i;if(apps.func.resetClassName(c,"toast-body"),""===a.title&&(c.classList.add("text-white"),$=c),!a.bgClass)switch(a.type){case"warning":case"success":case"info":a.bgClass=`bg-${a.type}`;break;default:a.bgClass="bg-danger"}$.classList.add(a.bgClass),this.sound.play(a.type),a.title?(i.style.display="flex",r.innerHTML=a.title):i.style.display="none",a.content?(c.style.display="block",c.innerHTML=a.content):c.style.display="none",e.delayMask&&this.loadingMask("delay",a.delay);let p=document.getElementById(s);p.appendChild(n),d.show(),e.event&&n.addEventListener("hidden.bs.toast",function(){switch(e.event.type){case"focus":apps.layouts.loadingMask("stop"),document.querySelector(e.event.selector).focus();break;case"replace":window.location.replace(e.event.url);break;case"reload":window.location.reload();break;case"back":history.back()}})},setToastAlertPosition:function(e,t="toast-alert-area"){let s=document.getElementById(t);switch(s.classList.remove("top-0","start-0","top-50","start-50","end-0","bottom-0","translate-middle-x","translate-middle-y"),e){case"top-left":s.classList.add("top-0"),s.classList.add("start-0");break;case"top-middle":s.classList.add("top-0"),s.classList.add("start-50"),s.classList.add("translate-middle-x");break;case"middle-left":s.classList.add("top-50"),s.classList.add("start-0"),s.classList.add("translate-middle-y");break;case"middle-middle":s.classList.add("top-50"),s.classList.add("start-50"),s.classList.add("translate-middle");break;case"middle-right":s.classList.add("top-50"),s.classList.add("end-0"),s.classList.add("translate-middle-y");break;case"bottom-left":s.classList.add("bottom-0"),s.classList.add("tart-0");break;case"bottom-middle":s.classList.add("bottom-0"),s.classList.add("start-50"),s.classList.add("translate-middle-x");break;case"bottom-right":s.classList.add("bottom-0"),s.classList.add("end-0");break;default:s.classList.add("top-0"),s.classList.add("end-0")}},textToCopy:function(e){let t=document.getElementById(e);navigator.clipboard.writeText(t.textContent).then(function(){this.showToastTemplate({type:"success",title:"텍스트가 복사되었습니다."})}).catch(function(e){console.error("텍스트 복사 실패:",e)})},htmlToCopy:function(e){let t=document.getElementById(e);navigator.clipboard.writeText(t.innerHTML).then(function(){this.showToastTemplate({type:"success",title:"HTML 내용이 복사되었습니다."})}).catch(function(e){console.error("HTML 내용 복사 실패:",e)})}},plugins:{JustValidate:{basic:e=>({errorFieldCssClass:["is-invalid"],errorLabelCssClass:["invalid-feedback"],...e}),tooltip:e=>({tooltip:{position:"top"},...e})}}};